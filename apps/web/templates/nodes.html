<!doctype html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>ZETA-SYNC Nodes</title>
    <link rel="stylesheet" href="/static/app.css" />
  </head>
  <body>
    <div class="wrap">
      <h1>Nodes</h1>

      <div class="nav">
        <a href="/">Home</a>
        <a href="/nodes">Nodes</a>
        <a href="/events">Events</a>
        <a href="/security">Security (M3)</a>
      </div>

      <div class="card">
        <div class="row">
          <button onclick="loadNodes()">Refresh</button>
          <label style="display:flex;gap:8px;align-items:center;">
            <input id="unknown" type="checkbox" />
            Show unknown peers
          </label>
        </div>
        <pre id="nodes"></pre>
      </div>
    </div>

    <script src="/static/app.js"></script>
    <script>
      async function loadNodes() {
        const includeUnknown = document.getElementById("unknown").checked ? "1" : "0";
        const res = await fetch("/api/v1/nodes?include_unknown=" + includeUnknown).then(r => r.json());
        document.getElementById("nodes").textContent = JSON.stringify(res, null, 2);
      }
      setInterval(loadNodes, 1000);
      loadNodes();
    </script>
  </body>
</html>
